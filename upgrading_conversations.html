<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="./assets/js/highlight.pack.js"></script>
  
  <script type="text/javascript" src="./assets/js/jquery_rotate.js"></script>
  <script type="text/javascript" src="./assets/js/main.js"></script>
  
  <script>
    
$(function(){

	// select the tab in the sidebar to reflect current page position

	var tabName = "Upgrading Conversations";

	$('.nav-link.active').removeClass('active');
	console.log('active tab: ', tabName);
	var nav_link = $('.nav-link:contains("' + tabName + '")');
	console.log('actual nav link:', nav_link);
	nav_link.addClass('active');
	
});
  </script>

  <script>hljs.initHighlightingOnLoad();</script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/bvbootstrap.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/highlightjs/default.min.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/main.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="./public/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./public/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./public/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./public/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="60x60" href="./public/apple-touch-icon-60x60.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="./public/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="./public/apple-touch-icon-76x76.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="./public/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="./public/favicon-196x196.png" sizes="196x196" />
  <link rel="icon" type="image/png" href="./public/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/png" href="./public/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="./public/favicon-16x16.png" sizes="16x16" />
  <link rel="icon" type="image/png" href="./public/favicon-128.png" sizes="128x128" />
  <meta name="application-name" content="&nbsp;"/>
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="./public/mstile-144x144.png" />
  <meta name="msapplication-square70x70logo" content="./public/mstile-70x70.png" />
  <meta name="msapplication-square150x150logo" content="./public/mstile-150x150.png" />

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-56370630-4', 'auto');
    ga('set', {
      title: 'Upgrading Conversations'
    });
    ga('send', 'pageview');
  </script>

</head>


  <body>
    <div id="portal_container">
      
      <nav class="navbar-fixed-top">
    <div class="navbar-header">
        <div class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
             aria-expanded="false">
            <i class="fa fa-bars fa-3"
               style="color:#fffff5; background-color: #00AB8E; padding:7px; border-radius: 3px;"></i>

            <a href="/" class="bv_logo" style="font-size: 22px;">
                <span class="bv_teal">&nbsp;bazaar</span><span class="bv_white">voice</span><span
                    class="bv_teal">:</span>
            </a>
        </div>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav side-nav nav-stacked nav-pills">
            <div class="bv_logo">
                <a href="/bv-android-sdk/index.html">
                    <span class="bv_teal">bazaar</span><span class="bv_white">voice</span><span class="bv_teal">:</span>
                </a>
            </div>
            <li class="nav-item">
                <a class="nav-link active" href="index.html">
                    <span><i class="m-r-1 fa fa-file-text-o"></i>Getting Started</span>
                </a>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="installation.html">
                            <span>Installation and Configuration</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="example_projects.html">
                         <span><i class="m-r-1 fa fa-file-code-o"></i>Example Projects</span>
                        </a>
                    </li>
                </ul>

            </li>
            <li class="nav-item">
                <span class="nav-link" href="modules.html">
                    <span><i class="m-r-1 fa fa-cogs"></i>Modules</span>
                </span>
                <ul>
                    <li class="nav-item">
                        <a class="nav-link" href="product_recommendations.html"><span>Product Recommendations (Beta)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="advertising.html"><span>Advertising</span></a>
                    </li>
                    <li class="nav-item">

                        <a class="nav-link" role="button" data-toggle="collapse" href="#curationsDropdown"
                           aria-expanded="false" aria-controls="curationsDropdown">
                                <span><span>Curations</span><span style="float:right;"><i id="curationsDropdownArrow"
                                                                                          class="fa fa-sort-desc  fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="curationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_display.html"><span>Curations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_custom_posts.html"><span>Curations Custom Posts</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="curations_example_app.html"><span>Curations Example App</span></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsDropdown"
                           aria-expanded="false" aria-controls="conversationsDropdown">
                                <span><span>Conversations</span><span style="float:right;"><i
                                        id="conversationsDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_display.html"><span>Conversations Display</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_submission.html"><span>Conversations Submission</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_iovation.html"><span>Authenticity with iovation</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="upgrading_conversations.html"><span>Upgrading Conversations</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>

                    <li class="nav-item">
                        <a class="nav-link" role="button" data-toggle="collapse" href="#conversationsStoresDropdown"
                           aria-expanded="false" aria-controls="conversationsStoresDropdown">
                                <span><span>Conversations for Stores</span><span style="float:right;"><i
                                        id="conversationsStoresDropdownArrow"
                                        class="fa fa-sort-desc fa-rotate-270"></i></span></span>
                        </a>
                        <div class="collapse "
                             id="conversationsStoresDropdown">
                            <ul>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores.html"><span>Conversations for Stores</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="conversations_stores_push.html"><span>Stores Push Notifications</span></a>
                                </li>
                            </ul>
                        </div>

                    </li>
                     <li class="nav-item">
                        <a class="nav-link" href="pin.html"><span>Post Interaction Notifications (Beta)</span></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="location.html"><span>Location (Beta)</span></a>
                    </li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="bv_pixel.html">
                    <span><i class="m-r-1 fa fa-dot-circle-o"></i>BV Pixel</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="user_authentication_token.html">
                    <span><i class="m-r-1 fa fa-lock"></i>User Authentication Token</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="faq_support.html">
                    <span><i class="m-r-1 fa fa-question-circle"></i>FAQ and Support</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="api_reference.html">
                    <span><i class="m-r-1 fa fa-book"></i>API Reference</span>
                </a>
            </li>
            <br>
            <li class="nav-item">
                <a class="nav-link"
                   href="mailto:mobilecoreteam@bazaarvoice.com?subject=Android SDK documentation feedback"
                   style="border: 1px #fff solid;">
                    <span><i class="m-r-1 fa fa-envelope"></i>Feedback</span>
                </a>
            </li>
        </ul>
    </div>
</nav>


      <div id="application_container">
        <div id="task_container">
          <div id="task_content" class="app-content">
            <div class="scroll-container scrollable--scrollbar">
              <div class="page-container">

                <div class="flex flex-row" id="content_title">
	Upgrading from an old version of BVSDK
</div>

<p>As of BVSDK version 4.1.0, the <strong>Conversations</strong> module has recently been upgraded extensively making it much easier to display and submit Consumer Generated Content. Upgrading to the latest BVSDK will require a couple changes. The guide below will provide a quick overview of the deprecated design patterns and the new design patters to use.</p>If you have never implemented Conversations on your native Android app, you can skip the info on this page. You will want to upgrade to take advantage of the following improvements:
<br><br>
<li>Fully parsed response objects so you can focus on the user experience.</li>
<li>Better error handling and messaging.</li>
<li>More explicit parameter builder patterns with all the built in types.</li>

<br>

<h2>Content Display: Ratings, Reviews, Questions, & Answers</h2>

<p>Previously, all content display was powered using a <code>BazaarRequest</code> object. This has been deprecated in favor of these 4 request objects:</p>
<ul>
	<li><code>ReviewsRequest</code></li>
	<li><code>QuestionAndAnswerRequest</code></li>
	<li><code>ProductDisplayPageRequest</code></li>
	<li><code>BulkRatingsRequest</code></li>
</ul>

<p>Using the above requestobjects make loading data easier by using success and failure blocks. As well, the display results contain easy to use model object such as, <code>Review</code>, <code>Question</code>, <code>Answer</code> and <code>Statistics</code>.</p>
<hr>

<h3>Content Display - Old Pattern</h3>

<p>For example, loading reviews previously looked like this:</p>

<pre><code class="java">BazaarRequest request = new BazaarRequest();
request.sendDisplayRequest(RequestType.REVIEWS, null, new OnBazaarResponse() {
    @Override
    public void onResponse(String url, JSONObject response) {
        try {
            // Write your own parser for a ton of JSON (sad face)
            Log.d("MainActivity", response.toString(1));
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onException(String message, Throwable exception) {
        //handle exception
    }
});
</code></pre>
<br>

<h3>Content Display - NEW Pattern!</h3>

<p>The example above it's too differnt from the new patter, but it will be a lot easier to construct new request parameters and now worry about JSON parsing with the new design. For example, a request of reviews for a single product now looks like:</p>

<pre><code class="java">BVConversationsClient client = new BVConversationsClient();

ReviewsRequest request = new ReviewsRequest.Builder(productId, reviewsLimit, reviewsOffset)
        .addSort(ReviewOptions.Sort.AuthorId, SortOrder.ASC)
        .build();

client.prepareCall(request).loadAsync(new ConversationsCallback<ReviewResponse>() {
    @Override
    public void onSuccess(ReviewResponse response) {
        //called on Main Thread
        response.getResults(); //Now you have nicely parsed objects you can snap to your pretty UI!
    }

    @Override
    public void onFailure(BazaarException exception) {
        //called on Main Thread -- Let your user's know something smells bad!
    }
});
</code></pre>

<br>

<p>The patern for Reviews applies similarly for <strong>Product Statistics</strong>, <strong>Questions & Answers</strong>, and <strong>Bulk Ratings</strong>.</p>

<br>
<h3>Content submission</h3>
<p>Content submission has changed in the same way that content display has. Previously, a <code>BazaarRequest</code> object would handle submitting every type of content. Now, use the more specific subclassed ConversationsSubmissionRequest type:</p>
<ul>
    <li><code>ReviewSubmissionRequest</code></li>
    <li><code>AnswerSubmissionRequest</code></li>
    <li><code>CommetnSubmissionRequest</code></li>
</ul>

<p>to submit Consumer Generated Content to the Bazaarvoice platform.</p>

<hr/>

<h4>Content Submission - Old Pattern</h4>

<p>For example, submitting a review previously looked like:</p>
<pre><code class="java">BazaarRequest request = new BazaarRequest();
        SubmissionParams params = new SubmissionParams();
        params.setProductId(String.valueOf(new Random().nextLong()));
        params.setCategoryId(String.valueOf(new Random().nextLong()));
        params.setUserId("123abcd");
        params.setRating(5);
        params.setTitle("Test Title" + (new Random()).nextLong());
        params.setReviewText("Lorem ipsum dolor sit amet, vim at harum molestie, ne vim posse senserit. Quas animal utroque ei duo. Has ne animal omittam maluisset. Te est dicat scaevola invidunt, eum eu maiongorum scripserit. Eos ei nibh ignota, ex has oratio suscipiantur." + (new Random()).nextLong());
        params.setUserNickname("testnickname");
        params.setAction(Action.SUBMIT);
        params.addPhotoUrl("http://apitestcustomer.ugc.bazaarvoice.com/bvstaging/5555/ps_amazon_s3_3rgg6s4xvev0zhzbnabyneo21/photo.jpg");
        params.addVideoUrl("http://www.youtube.com");

        // Add iovation fingerprint to Bazaarvoice Request
        // String blackbox = getBlackbox(getContext().getApplicationContext());
        // params.setFingerprint(blackbox);

        request.postSubmission(RequestType.REVIEWS, params, listener);
</code></pre>

<br>

<h4>Content Submission - NEW Pattern!</h4>

<p>Doing that same review submission now looks like:</p>
<pre><code class="java">BVConversationsClient client = new BVConversationsClient();

ReviewSubmissionRequest submission = new ReviewSubmissionRequest.Builder(Action.Preview, TEST_PRODUCT_ID)
        .fingerPrint(blackbox) 
        .userNickname("shazbat")
        .userEmail("foo@bar.com")
        .userId("user1234" + Math.random()) // Creating a random user id to avoid duplicated -- FOR TESTING ONLY!!!
        .rating(5)
        .title("Review title")
        .reviewText("This is the review text the user adds about how great the product is!")
        .sendEmailAlertWhenCommented(true)
        .sendEmailAlertWhenPublished(true)
        .agreedToTermsAndConditions(true)
        .addPhoto(localImageFile, "What a cute pupper!")
        .build();

client.prepareCall(submission).loadAsync(new ConversationsCallback<ReviewSubmissionResponse>() {

    @Override
    public void onSuccess(ReviewSubmissionResponse response) {
        // handle success message
    }

    @Override
    public void onFailure(BazaarException exception) {
        // handle error to let user know why submission failed
    }
});
</code></pre>


<br>

<p>The design pattern again are similar for submitting <strong>AnswerSubmissionRequest</strong> and <strong>QuestionSubmissionRequest</strong>.</p>
<br><br>


<div class="well well-sm">
	<h5>Author</h5>
	<p>Copyright 2016 Bazaarvoice, Inc. All rights reserved.</p>
	<h5>License</h5>
	<p>Use of the Bazaarvoice Mobile SDKs is contingent on your agreement and conformance with <a href="http://www.bazaarvoice.com/legal/api-terms-of-use.html">Bazaarvoice's API Terms of Use</a>. Additionally, you agree to store all data acquired by the SDK or Bazaarvoice's API only within the storage of the individual application instance using the SDK or API. You also agree to use the data acquired by the SDK or API only within the context of the same individual application instance and only for purposes consistent with that application's purpose. Except as otherwise noted, the Bazaarvoice iOS SDK is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>.</p>
</div>
<br>


              </div>
            </div>
          </div>
        </div>        
      </div>
    </div>
  </body>
